
"""
公司名称 -> 股票代码映射

用于自动识别用户查询中的上市公司并获取股票数据。
股票代码格式：sh600xxx (上海), sz000xxx/sz002xxx/sz300xxx (深圳)
"""

# A股热门公司映射
COMPANY_STOCK_MAP = {
    # 白酒
    "茅台": "sh600519",
    "贵州茅台": "sh600519",
    "五粮液": "sz000858",
    "泸州老窖": "sz000568",
    "洋河股份": "sz002304",

    # 新能源汽车
    "比亚迪": "sz002594",
    "宁德时代": "sz300750",
    "特斯拉": None,  # 美股，暂不支持
    "蔚来": None,    # 美股
    "小鹏": None,    # 美股
    "理想": None,    # 美股
    "长城汽车": "sh601633",
    "广汽集团": "sh601238",
    "上汽集团": "sh600104",

    # 互联网/科技
    "腾讯": None,     # 港股 00700
    "阿里巴巴": None, # 港股 09988
    "百度": None,     # 美股
    "京东": None,     # 美股
    "美团": None,     # 港股
    "字节跳动": None, # 未上市
    "小米": None,     # 港股 01810
    "华为": None,     # 未上市
    "中兴通讯": "sz000063",
    "科大讯飞": "sz002230",

    # 银行
    "工商银行": "sh601398",
    "建设银行": "sh601939",
    "农业银行": "sh601288",
    "中国银行": "sh601988",
    "招商银行": "sh600036",
    "平安银行": "sz000001",
    "兴业银行": "sh601166",

    # 保险
    "中国平安": "sh601318",
    "中国人寿": "sh601628",
    "中国太保": "sh601601",
    "新华保险": "sh601336",
    "中国人保": "sh601319",

    # 地产
    "万科": "sz000002",
    "保利发展": "sh600048",
    "碧桂园": None,   # 港股
    "恒大": None,     # 港股（已暂停交易）
    "融创": None,     # 港股

    # 医药
    "恒瑞医药": "sh600276",
    "药明康德": "sh603259",
    "迈瑞医疗": "sz300760",
    "片仔癀": "sh600436",
    "云南白药": "sz000538",

    # 消费
    "贵州茅台": "sh600519",
    "海天味业": "sh603288",
    "伊利股份": "sh600887",
    "蒙牛乳业": None,  # 港股
    "格力电器": "sz000651",
    "美的集团": "sz000333",
    "海尔智家": "sh600690",

    # 能源/资源
    "中国石油": "sh601857",
    "中国石化": "sh600028",
    "中国海油": "sh600938",
    "紫金矿业": "sh601899",
    "北方稀土": "sh600111",
    "天齐锂业": "sz002466",
    "赣锋锂业": "sz002460",

    # 半导体/芯片
    "中芯国际": "sh688981",
    "韦尔股份": "sh603501",
    "北方华创": "sz002371",
    "中微公司": "sh688012",
    "寒武纪": "sh688256",

    # 光伏/新能源
    "隆基绿能": "sh601012",
    "隆基股份": "sh601012",
    "通威股份": "sh600438",
    "阳光电源": "sz300274",
    "晶澳科技": "sz002459",

    # 军工
    "中国中航": "sh600760",
    "航发动力": "sh600893",
    "中航沈飞": "sh600760",

    # 通信
    "中国移动": "sh600941",
    "中国电信": "sh601728",
    "中国联通": "sh600050",
}


from typing import Optional, List, Tuple


def get_stock_code(company_name: str) -> Optional[str]:
    """
    根据公司名称获取股票代码

    Args:
        company_name: 公司名称

    Returns:
        股票代码（如 sh600519）或 None
    """
    return COMPANY_STOCK_MAP.get(company_name)


def find_company_in_query(query: str) -> List[Tuple[str, str]]:
    """
    在查询文本中查找公司名称

    Args:
        query: 用户查询文本

    Returns:
        [(公司名称, 股票代码), ...] 列表
    """
    found = []
    for company, code in COMPANY_STOCK_MAP.items():
        if company in query and code is not None:
            found.append((company, code))
    return found
